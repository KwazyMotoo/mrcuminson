<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="styles.css">
  <link rel="stylesheet" 
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
   
</head>
<body>
  <div class="desktop-layout">
    <!--- Google -->
    <div class="app-icon" onclick="toggleFakeWindow('window1')">
      <img  style="margin-top:10px;"src="Apps/images/google.png" alt="App Icon">
      <p>Google</p>
    </div>
    <!--- YT -->
    <div class="app-icon" onclick="toggleFakeWindow('window2')">
      <img src="Apps/images/youtube.png" alt="App Icon">
      <p>Youtube <br> (Unblocker) </p>
    </div>
    <!-- Weather -->
    <div class="app-icon" onclick="toggleFakeWindow('window3')">
      <img src="Apps/images/weather.png " alt="App Icon">
      <p>Weather <br> App</p>
    </div>
    <!-- Code Editor -->
    <div class="app-icon" onclick="toggleFakeWindow('window4')">
      <img src="Apps/images/editor.jpg " alt="App Icon">
      <p>Code <br> Editor</p>
    </div>
    <!-- Minecraft -->
    <div class="app-icon" onclick="toggleFakeWindow('window5')">
      <img src="Apps/images/minecraft.png " alt="App Icon">
      <p>Minecraft 1.8</p>
    </div>

    <!--- Window 6 Was For The Settings -->


    <!-- LOC -->
    <div class="app-icon" onclick="toggleFakeWindow('window7');locwarn() ">
      <img src="Apps/images/loc.png" alt="App Icon" >
      <p>LOC WIP <br> By TIW</p>
    </div>
  </div>
  
  
  <!-- Google -->
  <div id="window1" class="fakeWindow">
    <div class="navbar">
      <button class="navbar-btn" onclick="closeFakeWindow('window1')"><i id="close"class="fas fa-times" ></i></button>
      <button class="navbar-btn" onclick="toggleFullScreen('window1')"><i id="full" class="fas fa-expand"></i></button>
    </div>
    <iframe src="/static" width="100%" height="100%"></iframe>
  </div>
    <!-- YT -->
  <div id="window2" class="fakeWindow">
    <div class="navbar">
      <button class="navbar-btn" onclick="closeFakeWindow('window2')"><i id="close"class="fas fa-times" ></i></button>
      <button class="navbar-btn" onclick="toggleFullScreen('window2')"><i id="full" class="fas fa-expand"></i></button>
    </div>
    <iframe src="Apps/YT/" width="100%" height="100%"></iframe>
  </div>
  <!-- Weather-->
  <div id="window3" class="fakeWindow">
    <div class="navbar">
      <button class="navbar-btn" onclick="closeFakeWindow('window3')"><i id="close"class="fas fa-times" ></i></button>
      <button class="navbar-btn" onclick="toggleFullScreen('window3')"><i id="full" class="fas fa-expand"></i></button>
    </div>
    <iframe src="Apps/weather/" width="100%" height="100%"></iframe>
  </div>
  <!-- Code Editor-->
  <div id="window4" class="fakeWindow">
    <div class="navbar">
      <button class="navbar-btn" onclick="closeFakeWindow('window4')"><i id="close"class="fas fa-times" ></i></button>
      <button class="navbar-btn" onclick="toggleFullScreen('window4')"><i id="full" class="fas fa-expand"></i></button>
    </div>
    <iframe src="Apps/Editor/" width="100%" height="100%"></iframe>
  </div>
  <!--- Minecraft -->
  <div id="window5" class="fakeWindow">
    <div class="navbar">
      <button class="navbar-btn" onclick="closeFakeWindow('window5')"><i id="close"class="fas fa-times" ></i></button>
      <button class="navbar-btn" onclick="toggleFullScreen('window5')"><i id="full" class="fas fa-expand"></i></button>
    </div>
    <iframe src="Apps/MC/" width="100%" height="100%"></iframe>
  </div>
<!-- Settings -->
<div id="window6" class="fakeWindow">
  <div class="navbar">
    <button class="navbar-btn" onclick="closeFakeWindow('window6')"><i id="close" class="fas fa-times"></i></button>
    <button class="navbar-btn" onclick="toggleFullScreen('window6')"><i id="full" class="fas fa-expand"></i></button>
  </div>
  <div class="window-content">
    <h2>Settings</h2>
    <label for="color-selector">Background Color:</label>
    <input type="color" id="color-selector" onchange="changeBodyBackgroundColor(this.value)"> <br><br>
    <div class="form-group">
      <label for="image-file">Upload Image File:</label>
      <input type="file" id="image-file" class="form-control-file" onchange="handleImageUpload(event)"><br><br>
    </div>
    <div class="form-group">
      <label for="image-url">Image URL:</label>
      <input type="text" id="image-url" class="form-control" placeholder="Enter the URL of the background image" onchange="changeBodyBackgroundImage(this.value)"><br><br>
    </div>
    <button class="btn btn-primary" onclick="resetBackground()">Reset Background</button><br><br>
    <br> <h3> Audio Settings</h3>

    <label for="music-file">Upload Music File:</label>
    <input type="file" id="music-file" accept=".mp3" onchange="handleMusicUpload(event)"> <br>
    <label for="music-src">Music File Source:</label>
    <input type="text" id="music-src" class="form-control" placeholder="Enter the URL or path of the music file" onchange="changeBackgroundMusic(this.value)">

  </div>
    <!-- Add more settings or content as needed -->
  </div>

 <!--- LOC -->
 <div id="window7" class="fakeWindow">
  <div class="navbar">
    <button class="navbar-btn" onclick="closeFakeWindow('window7')"><i id="close"class="fas fa-times" ></i></button>
    <button class="navbar-btn" onclick="toggleFullScreen('window7')"><i id="full" class="fas fa-expand"></i></button>
  </div>
  <iframe src="Apps/loc/" width="100%" height="100%"></iframe>
</div>
</div>


  <script src="script.js"></script>
  <div class="windows-toolbar">
    <div class="left-toolbar">
      <div class="start-button"></div>
      <div class="program-title">Diamond OS </div>
      <div class="search-bar">
        <input type="text" class="search" placeholder="Search">
      </div>
    </div>
     
    
    
    <div class="right-toolbar">
      <div id="volume-slider">
        <input type="range" min="0" max="1" step="0.1" value="0.5" id="volume-control" >
      </div> 
      <div class="icon-container">
        <i class=""></i>
      </div>
      <div class="icon-container">
        <i class="fa-solid fa-wifi"></i>
      </div>
      
      <div class="icon-container">
        <i class="fa-solid fa-volume-high" id="volume-knob"></i>
      </div>
      
      <div class="icon-container">
       <i class="fas fa-battery-full"></i>
      </div>
      <div class="icon-container">
        <i id="settings-icon" class="fa-sharp fa-solid fa-gear" onclick="toggleFakeWindow('window6')"></i>
       </div>
  
      <div class="icon-container">
       <i class="fa-solid fa-expand" id="fullscreen-button"></i>
      </div>
  
  <script>
  const fullscreenButton = document.getElementById("fullscreen-button");
  
  // Check if Fullscreen API is supported
  if (document.fullscreenEnabled) {
    // Add event listener to button
    fullscreenButton.addEventListener("click", () => {
      // Request fullscreen
      document.documentElement.requestFullscreen();
    });
  } else {
    // Fullscreen API is not supported
    fullscreenButton.disabled = true;
  }
  </script>
      
      
      <div class="time-date">
        <span id="time"></span>
        <br>
        <span id="date"></span>
      </div>
  
    </div>
  </div>

  <audio id="background-music" loop>
    <source src="bgmusic.mp3" type="audio/mp3">
    Your browser does not support the audio element.
  </audio>
    
      <div id="volume-knob"></div>
      <script>
        const backgroundMusic = document.getElementById('background-music');
        const volumeSlider = document.getElementById('volume-slider');
        const volumeKnob = document.getElementById('volume-knob');
        const volumeControl = document.getElementById('volume-control');
        let defaultMusicPlaying = true; // Track if default music is playing
      
        volumeKnob.addEventListener('click', () => {
          volumeSlider.style.display = (volumeSlider.style.display === 'none') ? 'block' : 'none';
        });
      
        volumeControl.addEventListener('input', () => {
          setMusicVolume(volumeControl.value);
        });
      
        // Start the background music when the page loads
        backgroundMusic.play();
        backgroundMusic.volume = 0.005;
      
        const musicFileInput = document.getElementById('music-file');
        const musicSrcInput = document.getElementById('music-src');
        let audioContext;
        let musicSource;
      
        function handleMusicUpload(event) {
          const file = event.target.files[0];
          const reader = new FileReader();
      
          reader.onload = function(e) {
            const musicDataURL = e.target.result;
            loadBackgroundMusic(musicDataURL);
          };
      
          reader.readAsDataURL(file);
        }
      
        function changeBackgroundMusic(source) {
          if (source.trim() !== '') {
            loadBackgroundMusic(source);
          } else {
            loadBackgroundMusic('');
          }
        }
      
        function loadBackgroundMusic(source) {
          if (musicSource) {
            musicSource.stop();
            musicSource.disconnect();
          }
      
          if (!audioContext) {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
          }
      
          fetch(source)
            .then(response => response.arrayBuffer())
            .then(arrayBuffer => audioContext.decodeAudioData(arrayBuffer))
            .then(audioBuffer => {
              musicSource = audioContext.createBufferSource();
              musicSource.buffer = audioBuffer;
              musicSource.loop = true;
              musicSource.connect(audioContext.destination);
              if (defaultMusicPlaying) {
                backgroundMusic.pause(); // Pause the default music
                defaultMusicPlaying = false;
              }
              musicSource.start(0);
              setMusicVolume(volumeControl.value);
            })
            .catch(error => {
              console.error('Failed to load background music:', error);
            });
        }
      
        function setMusicVolume(volume) {
          if (backgroundMusic) {
            backgroundMusic.volume = volume;
          }
          if (musicSource) {
            musicSource.volume = volume;
          }
        }
      
        // Set the default music file if no custom file or source is provided
        changeBackgroundMusic('');
      
        // Handle page unload to stop the music and release resources
        window.addEventListener('beforeunload', () => {
          if (musicSource) {
            musicSource.stop();
            musicSource.disconnect();
          }
      
          if (audioContext) {
            audioContext.close();
          }
        });
      </script>
</body>
</html>
